# Animal Zoom - Integration Testing Guide

ì™„ì „íˆ í†µí•©ëœ API/WebSocket ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“‹ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

### 1. Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í™•ì¸
```bash
docker ps
```

ë‹¤ìŒ ì»¨í…Œì´ë„ˆë“¤ì´ **healthy** ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤:
- `animal-zoom-api` (í¬íŠ¸ 3000-3001)
- `animal-zoom-postgres` (í¬íŠ¸ 5432)

ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë¼ë©´:
```bash
cd /home/lotus/document/lotus/animal-zoom
docker-compose up -d
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
cd web_core
bun install
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë‹¨ì¼ ì‚¬ìš©ì ë£¸ ìƒì„± ë° ì°¸ê°€

#### Step 1: í…ŒìŠ¤íŠ¸ ë£¸ ìƒì„±
```bash
bun run create-room
```

ì¶œë ¥ ì˜ˆì‹œ:
```
âœ… Room created successfully!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Room Code: NCSIRG
Room ID: 074e319b-0bd6-48b2-bd88-f4f6114b0465
Room Name: Test Room
Max Participants: 10
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ Use this room code to join:
   NCSIRG
```

**ğŸ“ ë£¸ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì„¸ìš”!**

#### Step 2: ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
bun run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5173 ì ‘ì†

#### Step 3: ë£¸ ì°¸ê°€
1. **Your Name** í•„ë“œì— ì´ë¦„ ì…ë ¥ (ì˜ˆ: "Test User")
2. **Room Code** í•„ë“œì— ìœ„ì—ì„œ ìƒì„±í•œ ë£¸ ì½”ë“œ ì…ë ¥ (ì˜ˆ: "NCSIRG")
3. **Join Now** í´ë¦­

#### Step 4: í™•ì¸ ì‚¬í•­
ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì½˜ì†”ì—ì„œ ë‹¤ìŒì„ í™•ì¸:

âœ… **ì¸ì¦ ì„±ê³µ**
```
âœ… Authenticated as: Test User
```

âœ… **ë£¸ ì°¸ê°€ ì„±ê³µ**
```
âœ… Joined room: NCSIRG
```

âœ… **WebSocket ì—°ê²°**
```
ğŸ”Œ WebSocket connected
ğŸ  Room joined via WebSocket
```

âœ… **ì°¸ê°€ì ì¶”ê°€**
```
âœ… Added 1 participants to the room
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì¤‘ ì‚¬ìš©ì ì‹¤ì‹œê°„ ë™ê¸°í™”

#### Step 1: ì²« ë²ˆì§¸ ì‚¬ìš©ì (ìœ„ ì‹œë‚˜ë¦¬ì˜¤ 1 ì™„ë£Œ)

#### Step 2: ë‘ ë²ˆì§¸ ë¸Œë¼ìš°ì € íƒ­/ì°½ ì—´ê¸°
ìƒˆ ì‹œí¬ë¦¿/í”„ë¼ì´ë¹— ì°½ ë˜ëŠ” ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ:
1. http://localhost:5173 ì ‘ì†
2. ë‹¤ë¥¸ ì´ë¦„ ì…ë ¥ (ì˜ˆ: "User 2")
3. **ê°™ì€ ë£¸ ì½”ë“œ** ì…ë ¥
4. Join Now í´ë¦­

#### Step 3: ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ í™•ì¸

**ì²« ë²ˆì§¸ íƒ­ ì½˜ì†”:**
```
ğŸ‘‹ User joined: User 2
âœ… Added participant: User 2
```

**ë‘ ë²ˆì§¸ íƒ­ ì½˜ì†”:**
```
âœ… Added 2 participants to the room
```

#### Step 4: ì°¸ê°€ì ê·¸ë¦¬ë“œ í™•ì¸
- ë‘ íƒ­ ëª¨ë‘ 2ëª…ì˜ ì°¸ê°€ìê°€ í‘œì‹œë˜ì–´ì•¼ í•¨
- ê° ì°¸ê°€ìì˜ 3D ìºë¦­í„°ê°€ ë Œë”ë§ë˜ì–´ì•¼ í•¨

#### Step 5: ì‚¬ìš©ì í‡´ì¥ í…ŒìŠ¤íŠ¸
í•œ íƒ­ì„ ë‹«ê±°ë‚˜ "Leave" ë²„íŠ¼ í´ë¦­

**ë‚¨ì€ íƒ­ ì½˜ì†”:**
```
ğŸ‘‹ User left: [user-id]
ğŸ‘‹ Removed participant: [user-id]
```

---

## ğŸ” ìƒì„¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### API Integration í…ŒìŠ¤íŠ¸

#### Guest ì¸ì¦
```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸:
// - POST /auth/guest ìš”ì²­
// - 200/201 ì‘ë‹µ
// - accessToken ë° user ê°ì²´ ë°˜í™˜
```

#### ë£¸ ì°¸ê°€
```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸:
// - POST /rooms/{roomCode}/join ìš”ì²­
// - 200/201 ì‘ë‹µ
// - Participant ê°ì²´ ë°˜í™˜
```

### WebSocket ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸

#### ì—°ê²° ì´ë²¤íŠ¸
```javascript
// í™•ì¸:
// - connect ì´ë²¤íŠ¸
// - room:join ì´ë²¤íŠ¸ ì „ì†¡
// - room:joined ì´ë²¤íŠ¸ ìˆ˜ì‹ 
```

#### ì‚¬ìš©ì ì´ë²¤íŠ¸
```javascript
// ë‹¤ë¥¸ ì‚¬ìš©ì ì…ì¥ ì‹œ:
// - user:joined ì´ë²¤íŠ¸ ìˆ˜ì‹ 
// - ParticipantManager.addParticipant() í˜¸ì¶œ

// ë‹¤ë¥¸ ì‚¬ìš©ì í‡´ì¥ ì‹œ:
// - user:left ì´ë²¤íŠ¸ ìˆ˜ì‹ 
// - ParticipantManager.removeParticipant() í˜¸ì¶œ
```

---

## âš ï¸ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "Room not found" ì—ëŸ¬
**ì›ì¸:** ë£¸ ì½”ë“œê°€ ì˜ëª»ë˜ì—ˆê±°ë‚˜ ë§Œë£Œë¨

**í•´ê²°:**
```bash
bun run create-room
```
ìƒˆë¡œìš´ ë£¸ ì½”ë“œ ìƒì„±

### ë¬¸ì œ 2: WebSocket ì—°ê²° ì‹¤íŒ¨
**ì›ì¸:** API ì„œë²„ê°€ ì‹¤í–‰ë˜ì§€ ì•Šê±°ë‚˜ í¬íŠ¸ ì¶©ëŒ

**í™•ì¸:**
```bash
curl http://localhost:3000/health
curl http://localhost:3001
```

**í•´ê²°:**
```bash
docker-compose restart animal-zoom-api
```

### ë¬¸ì œ 3: "Unauthorized" ì—ëŸ¬
**ì›ì¸:** JWT í† í° ë§Œë£Œ ë˜ëŠ” API ì¸ì¦ ì‹¤íŒ¨

**í•´ê²°:**
1. localStorage ì´ˆê¸°í™”:
   ```javascript
   localStorage.clear()
   ```
2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
3. ë‹¤ì‹œ ì°¸ê°€ ì‹œë„

### ë¬¸ì œ 4: ì°¸ê°€ìê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ
**ì›ì¸:** 3D ëª¨ë¸ ë¡œë”© ì‹¤íŒ¨ ë˜ëŠ” ParticipantManager ì˜¤ë¥˜

**í™•ì¸:**
- ì½˜ì†”ì— ì—ëŸ¬ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ í™•ì¸
- Network íƒ­ì—ì„œ 3D ëª¨ë¸ (.glb) ë¡œë”© í™•ì¸

**í•´ê²°:**
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
- ë¸Œë¼ìš°ì € ìºì‹œ ì´ˆê¸°í™”

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ê¸°ë³¸ ê¸°ëŠ¥
- [ ] ë£¸ ìƒì„± (bun run create-room)
- [ ] ì´ë¦„ ì…ë ¥ í•„ë“œ ë™ì‘
- [ ] ë£¸ ì½”ë“œ ì…ë ¥ í•„ë“œ ë™ì‘ (ìë™ ëŒ€ë¬¸ì ë³€í™˜)
- [ ] Join Now ë²„íŠ¼ ë™ì‘
- [ ] ë¡œë”© ì¸ë””ì¼€ì´í„° í‘œì‹œ

### âœ… ì¸ì¦ & API
- [ ] Guest ì¸ì¦ ì„±ê³µ
- [ ] JWT í† í° localStorage ì €ì¥
- [ ] ë£¸ ì°¸ê°€ API í˜¸ì¶œ ì„±ê³µ
- [ ] Participant ê°ì²´ ìˆ˜ì‹ 

### âœ… WebSocket
- [ ] WebSocket ì—°ê²° ì„±ê³µ
- [ ] room:joined ì´ë²¤íŠ¸ ìˆ˜ì‹ 
- [ ] ê¸°ì¡´ ì°¸ê°€ì ëª©ë¡ ìˆ˜ì‹ 
- [ ] user:joined ì´ë²¤íŠ¸ ì²˜ë¦¬
- [ ] user:left ì´ë²¤íŠ¸ ì²˜ë¦¬

### âœ… UI/UX
- [ ] ì°¸ê°€ì ê·¸ë¦¬ë“œ í‘œì‹œ
- [ ] ì°¸ê°€ì ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
- [ ] 3D ìºë¦­í„° ë Œë”ë§
- [ ] ì œì–´ ë²„íŠ¼ ë™ì‘ (Mute, Camera, Leave)
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

### âœ… ë‹¤ì¤‘ ì‚¬ìš©ì
- [ ] 2ëª… ë™ì‹œ ì°¸ê°€
- [ ] ì‹¤ì‹œê°„ ì…ì¥ ì•Œë¦¼
- [ ] ì‹¤ì‹œê°„ í‡´ì¥ ì•Œë¦¼
- [ ] ë™ì‹œì— 3ëª… ì´ìƒ ì°¸ê°€
- [ ] ì°¸ê°€ì ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ìë™ ì¡°ì •

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### Phase 5: ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„
1. **ì±„íŒ… ì‹œìŠ¤í…œ**
   - ì±„íŒ… UI ì»´í¬ë„ŒíŠ¸
   - chat:message ì´ë²¤íŠ¸ ì²˜ë¦¬
   - ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬

2. **ì•„ë°”íƒ€ ë™ê¸°í™”**
   - ì‹¤ì‹œê°„ ìœ„ì¹˜/íšŒì „ ë™ê¸°í™”
   - state:update ì´ë²¤íŠ¸ ì²˜ë¦¬
   - ì• ë‹ˆë©”ì´ì…˜ ë™ê¸°í™”

3. **ë£¸ ì»¤ìŠ¤í„°ë§ˆì´ì œì´ì…˜**
   - ë£¸ ì„¤ì • ë³€ê²½ UI
   - room:updated ì´ë²¤íŠ¸ ì²˜ë¦¬
   - ì‹¤ì‹œê°„ ë£¸ ì—…ë°ì´íŠ¸

4. **ë¦¬ì†ŒìŠ¤ API í†µí•©**
   - ResourceStorageë¥¼ APIë¡œ êµì²´
   - ì„œë²„ì— 3D ëª¨ë¸ ì—…ë¡œë“œ
   - ëª¨ë¸ ëª©ë¡ ë° ë‹¤ìš´ë¡œë“œ

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë¡œê·¸ ì˜ˆì‹œ

ì„±ê³µì ì¸ ì„¸ì…˜ì˜ ì „ì²´ ë¡œê·¸:

```
ğŸš€ Starting Animal Zoom (Integrated)...
ğŸ® Animal Zoom - Initializing...
âœ… Join screen ready

[User enters name and room code]

ğŸ“ Joining meeting...
ğŸ‘¤ User ID: 435ef17e-d828-4135-9bfc-d27ebaf61348
ğŸ  Room Code: NCSIRG
ğŸ« Participant ID: abc-123

ğŸ¬ ParticipantManager initialized
ğŸ›ï¸ ControlBar initialized
ğŸ”Œ WebSocket configured
ğŸ”Œ WebSocket connected
ğŸ  Room joined via WebSocket: { roomCode: "NCSIRG", participants: [...] }
âœ… Added 1 participants to the room
```

---

## ğŸ’¡ íŒ

1. **ê°œë°œì ë„êµ¬ í™œìš©**
   - Console íƒ­: ë¡œê·¸ ë° ì—ëŸ¬ í™•ì¸
   - Network íƒ­: API/WebSocket ìš”ì²­ í™•ì¸
   - Application íƒ­: localStorage í™•ì¸

2. **ì—¬ëŸ¬ ì‚¬ìš©ì í…ŒìŠ¤íŠ¸**
   - ì‹œí¬ë¦¿ ëª¨ë“œ ì‚¬ìš©
   - ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì‚¬ìš©
   - ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ì ‘ì†

3. **ë””ë²„ê¹…**
   - `VITE_DEBUG=true`ë¡œ ìƒì„¸ ë¡œê·¸ í™œì„±í™”
   - WebSocket ì—°ê²° ìƒíƒœ í™•ì¸
   - localStorageì˜ í† í° í™•ì¸

---

## ğŸ‰ ì™„ë£Œ!

ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í–ˆë‹¤ë©´ Animal Zoomì˜ í•µì‹¬ ë©€í‹°í”Œë ˆì´ì–´ ê¸°ëŠ¥ì´ ì™„ë²½í•˜ê²Œ ì‘ë™í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤!
